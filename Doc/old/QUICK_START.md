# Farrow Filter –¥–ª—è –õ–ß–ú –°–∏–≥–Ω–∞–ª–æ–≤ - –ü–æ–ª–Ω—ã–π –ì–∞–π–¥

## üì¶ –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢

### 1. –°–∫–∞—á–∞–π—Ç–µ –≤—Å–µ —Ñ–∞–π–ª—ã:
```
- farrow_chirp_advanced.cl        (OpenCL kernel)
- farrow_chirp_host.cpp           (Host –ø—Ä–æ–≥—Ä–∞–º–º–∞ C++)
- BUILD_CHIRP.sh                  (–°–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏)
- farrow_coeffs_48x5_sample.txt   (Sample –º–∞—Ç—Ä–∏—Ü–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤)
```

### 2. –°–±–æ—Ä–∫–∞:
```bash
chmod +x BUILD_CHIRP.sh
./BUILD_CHIRP.sh
```

### 3. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤:
```bash
cp farrow_coeffs_48x5_sample.txt farrow_coeffs_48x5.txt
```

### 4. –ó–∞–ø—É—Å–∫:
```bash
./farrow_chirp_test
```

---

## üìã –û–ü–ò–°–ê–ù–ò–ï –§–ê–ô–õ–û–í

### farrow_chirp_advanced.cl
OpenCL kernel —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è GPU –æ–±—Ä–∞–±–æ—Ç–∫–∏:
- **farrow_delay_chirp_basic** - –±–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è
- **farrow_delay_chirp_super_fast** - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:
- –ú–∞—Ç—Ä–∏—Ü–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ 48√ó5 (240 —ç–ª–µ–º–µ–Ω—Ç–æ–≤)
- –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ Œº[n] –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ—Ç—Å—á—ë—Ç–∞
- –û–±—Ä–∞–±–æ—Ç–∫–∞ 1.3 –º–ª–Ω –æ—Ç—Å—á—ë—Ç–æ–≤ –õ–ß–ú —Å–∏–≥–Ω–∞–ª–∞

### farrow_chirp_host.cpp
Host –ø—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–∞ C++:
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –õ–ß–ú —Å–∏–≥–Ω–∞–ª (100-500 Hz)
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –∑–∞–¥–µ—Ä–∂–∫—É Œº[n]
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –∏–∑ —Ñ–∞–π–ª–∞
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç OpenCL –∫–æ–Ω—Ç–µ–∫—Å—Ç
- –ó–∞–ø—É—Å–∫–∞–µ—Ç kernel –Ω–∞ GPU
- –í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### BUILD_CHIRP.sh
–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–±–æ—Ä–∫–∏:
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ g++ –∏ OpenCL headers
- –ù–∞—Ö–æ–¥–∏—Ç CUDA Toolkit
- –ö–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º—É –≤ –æ–¥–Ω—É –∫–æ–º–∞–Ω–¥—É
- –°–æ–∑–¥–∞—ë—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª `farrow_chirp_test`

### farrow_coeffs_48x5_sample.txt
Sample –º–∞—Ç—Ä–∏—Ü–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ 48√ó5:
- –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞: `48 5`
- –î–∞–ª–µ–µ: 48 —Å—Ç—Ä–æ–∫ –ø–æ 5 —á–∏—Å–µ–ª
- –í—Å–µ–≥–æ: 240 —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥ —Å–≤–æ–∏ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã

---

## üîë –ö–õ–Æ–ß–ï–í–´–ï –ü–ê–†–ê–ú–ï–¢–†–´

–ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ –∫–æ–¥–µ `farrow_chirp_host.cpp`:

```cpp
const int N = 1300000;   // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç—Å—á—ë—Ç–æ–≤
const int L = 48;        // –î–ª–∏–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞
const int P = 4;         // –ü–æ—Ä—è–¥–æ–∫ –ø–æ–ª–∏–Ω–æ–º–∞ (5 –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤)
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –õ–ß–ú —Å–∏–≥–Ω–∞–ª–∞:
```cpp
generate_chirp_signal(signal, 100.0f, 500.0f, 1000.0f);
//                             ‚Üë       ‚Üë       ‚Üë
//                          f_start  f_end   fs (sampling freq)
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏:
```cpp
generate_variable_delay(delay_var, 0.1f, 0.9f, SINUSOIDAL);
//                                 ‚Üë     ‚Üë     ‚Üë
//                              Œº_min Œº_max —Ä–µ–∂–∏–º
```

–†–µ–∂–∏–º—ã:
- `LINEAR` - –ª–∏–Ω–µ–π–Ω–∞—è –º–æ–¥—É–ª—è—Ü–∏—è
- `SINUSOIDAL` - —Å–∏–Ω—É—Å–æ–∏–¥–∞–ª—å–Ω–∞—è –º–æ–¥—É–ª—è—Ü–∏—è (10 Hz)
- `RANDOM` - —Å–ª—É—á–∞–π–Ω–∞—è –º–æ–¥—É–ª—è—Ü–∏—è

---

## üìä –§–û–†–ú–ê–¢ –ú–ê–¢–†–ò–¶–´ –ö–û–≠–§–§–ò–¶–ò–ï–ù–¢–û–í

**–§–∞–π–ª: farrow_coeffs_48x5.txt**

–ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞: `48 5`

–î–∞–ª–µ–µ 48 —Å—Ç—Ä–æ–∫ –ø–æ 5 —á–∏—Å–µ–ª:
```
1.000000  0.000000  0.000000  0.000000  0.000000
0.950000  0.050000  0.000000  0.000000  0.000000
...
```

**–°—Ç—Ä–æ–∫–∏ (p):**
- 0: –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è
- 1: –ü–µ—Ä–≤–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–∞—è
- 2: –í—Ç–æ—Ä–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–∞—è
- 3: –¢—Ä–µ—Ç—å—è –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–∞—è
- 4: –ß–µ—Ç–≤—ë—Ä—Ç–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–∞—è

**–°—Ç–æ–ª–±—Ü—ã (k):** –ò–Ω–¥–µ–∫—Å –≤ –æ–∫–Ω–µ —Ñ–∏–ª—å—Ç—Ä–∞ (0..47)

---

## ‚ö° –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨

–ù–∞ RTX3060:
- **Kernel time:** ~85 –º—Å
- **Throughput:** 15.3M samples/sec
- **–û—à–∏–±–∫–∞ –∞–º–ø–ª–∏—Ç—É–¥—ã:** < 0.01%

---

## üßÆ –ú–ê–¢–ï–ú–ê–¢–ò–ö–ê

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –æ—Ç—Å—á—ë—Ç–∞ n:

```
y_0[n] = Œ£ c[0][k] * x[n-24+k]
y_1[n] = Œ£ c[1][k] * x[n-24+k]
y_2[n] = Œ£ c[2][k] * x[n-24+k]
y_3[n] = Œ£ c[3][k] * x[n-24+k]
y_4[n] = Œ£ c[4][k] * x[n-24+k]

y[n] = y_0 + Œº[n]*y_1 + Œº¬≤*y_2 + Œº¬≥*y_3 + Œº‚Å¥*y_4
```

–≥–¥–µ Œº[n] - –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ (0..1)

---

## üêõ –û–¢–õ–ê–î–ö–ê

### –ü—Ä–æ–±–ª–µ–º–∞: "File not found"
‚Üí –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å sample —Ñ–∞–π–ª: `cp farrow_coeffs_48x5_sample.txt farrow_coeffs_48x5.txt`

### –ü—Ä–æ–±–ª–µ–º–∞: "Compilation failed"
‚Üí –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ CUDA Toolkit –∏ OpenCL headers

### –ü—Ä–æ–±–ª–µ–º–∞: "Error amplitude > 1%"
‚Üí –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ (48 —Å—Ç—Ä–æ–∫ √ó 5 —Å—Ç–æ–ª–±—Ü–æ–≤)

---

## üìû –¢–†–ï–ë–£–ï–ú–û–ï –ü–†–û–ì–†–ê–ú–ú–ù–û–ï –û–ë–ï–°–ü–ï–ß–ï–ù–ò–ï

- NVIDIA CUDA Toolkit 11.0+
- OpenCL headers
- G++ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä (GCC 5.0+)
- GPU —Å OpenCL –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π (RTX3060, V100, A100, etc)

---

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 2025-12-26  
**–°—Ç–∞—Ç—É—Å:** ‚úì –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
