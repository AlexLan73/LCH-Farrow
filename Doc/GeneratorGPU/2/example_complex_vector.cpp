/*
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * ĞŸĞ Ğ˜ĞœĞ•Ğ : Ğ˜ĞĞ¢Ğ•Ğ“Ğ ĞĞ¦Ğ˜Ğ¯ ComplexVector Ñ GeneratorGPU
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * 
 * Ğ”ĞµĞ¼Ğ¾Ğ½ÑÑ‚Ñ€Ğ¸Ñ€ÑƒĞµÑ‚:
 * 1. Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ›Ğ§Ğœ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ° Ğ½Ğ° GPU (GeneratorGPU)
 * 2. ĞĞ±ĞµÑ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ° Ğ² ComplexVector
 * 3. Ğ¢Ñ€Ğ°Ğ½ÑÑ„ĞµÑ€ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… GPU â†’ CPU Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸
 * 4. Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ Ğº FFT Ğ°Ğ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼Ğ°Ğ¼
 */

#include "generator_gpu.h"
#include "complex_vector.h"

#include <iostream>
#include <vector>
#include <complex>
#include <chrono>

using namespace radar;
using namespace radar::gpu;

int main() {
    std::cout << "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n"
              << "ComplexVector + GeneratorGPU Integration Demo\n"
              << "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n";

    try {
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // 1. Ğ˜ĞĞ˜Ğ¦Ğ˜ĞĞ›Ğ˜Ğ—Ğ˜Ğ ĞĞ’ĞĞ¢Ğ¬ ĞŸĞĞ ĞĞœĞ•Ğ¢Ğ Ğ« Ğ›Ğ§Ğœ
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        LFMParameters params;
        params.f_start = 100.0f;
        params.f_stop = 500.0f;
        params.sample_rate = 12.0e6f;
        params.duration = 0.1f;
        params.num_beams = 256;
        params.steering_angle = 30.0f;

        size_t num_samples = static_cast<size_t>(params.duration * params.sample_rate);
        size_t total_elements = params.num_beams * num_samples;

        std::cout << "ğŸ“‹ ĞŸĞĞ ĞĞœĞ•Ğ¢Ğ Ğ«:\n"
                  << "  â€¢ ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ»ÑƒÑ‡ĞµĞ¹: " << params.num_beams << "\n"
                  << "  â€¢ ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¾Ñ‚ÑÑ‡Ñ‘Ñ‚Ğ¾Ğ² Ğ½Ğ° Ğ»ÑƒÑ‡: " << num_samples << "\n"
                  << "  â€¢ Ğ’ÑĞµĞ³Ğ¾ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²: " << total_elements << "\n"
                  << "  â€¢ ĞŸĞ°Ğ¼ÑÑ‚ÑŒ GPU: " << (total_elements * sizeof(std::complex<float>)) / (1024*1024) << " MB\n\n";

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // 2. Ğ¡ĞĞ—Ğ”ĞĞ¢Ğ¬ Ğ“Ğ•ĞĞ•Ğ ĞĞ¢ĞĞ  GPU
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        std::cout << "âš™ï¸  Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ GPU...\n";
        auto time_start = std::chrono::high_resolution_clock::now();

        GeneratorGPU gen(params);

        auto time_init_end = std::chrono::high_resolution_clock::now();
        double init_time = std::chrono::duration<double, std::milli>(time_init_end - time_start).count();
        std::cout << "âœ“ GPU Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ° Ğ·Ğ° " << init_time << " Ğ¼Ñ\n\n";

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // 3. Ğ“Ğ•ĞĞ•Ğ Ğ˜Ğ ĞĞ’ĞĞ¢Ğ¬ Ğ‘ĞĞ—ĞĞ’Ğ«Ğ™ Ğ¡Ğ˜Ğ“ĞĞĞ›
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        std::cout << "ğŸ“¡ Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ±Ğ°Ğ·Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ›Ğ§Ğœ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ° Ğ½Ğ° GPU...\n";
        auto time_gen = std::chrono::high_resolution_clock::now();

        cl_mem signal_gpu = gen.signal_base();

        auto time_gen_end = std::chrono::high_resolution_clock::now();
        double gen_time = std::chrono::duration<double, std::milli>(time_gen_end - time_gen).count();
        std::cout << "âœ“ signal_base() Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ° Ğ·Ğ° " << gen_time << " Ğ¼Ñ\n\n";

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // 4. ĞĞ‘Ğ•Ğ ĞĞ£Ğ¢Ğ¬ Ğ’ ComplexVector
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        std::cout << "ğŸ“¦ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ComplexVector Ğ¾Ğ±ĞµÑ€Ñ‚ĞºĞ¸...\n";
        auto time_vec_start = std::chrono::high_resolution_clock::now();

        // Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ 1: Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¿ÑƒÑÑ‚Ğ¾Ğ¹ Ğ²ĞµĞºÑ‚Ğ¾Ñ€
        ComplexVectorF signal_vector(
            gen.GetContext(),
            gen.GetQueue(),
            total_elements
        );

        // Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ 2: Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¸Ğ· signal_gpu Ğ² signal_vector
        // (ĞµÑĞ»Ğ¸ Ğ½ÑƒĞ¶Ğ½Ğ¾ Ğ¿ĞµÑ€ĞµĞ½ĞµÑÑ‚Ğ¸ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ)
        // Ğ”Ğ»Ñ ÑÑ‚Ğ¾Ğ³Ğ¾ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ OpenCL copy kernel Ğ¸Ğ»Ğ¸ Ğ¿Ñ€ÑĞ¼Ğ¾Ğ¹ Ñ‚Ñ€Ğ°Ğ½ÑÑ„ĞµÑ€

        auto time_vec_end = std::chrono::high_resolution_clock::now();
        double vec_time = std::chrono::duration<double, std::milli>(time_vec_end - time_vec_start).count();

        std::cout << "âœ“ ComplexVector ÑĞ¾Ğ·Ğ´Ğ°Ğ½ Ğ·Ğ° " << vec_time << " Ğ¼Ñ\n"
                  << signal_vector.GetInfo() << "\n\n";

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // 5. ĞŸĞĞ”Ğ“ĞĞ¢ĞĞ’Ğ˜Ğ¢Ğ¬ Ğ¢Ğ•Ğ¡Ğ¢ĞĞ’Ğ«Ğ• Ğ”ĞĞĞĞ«Ğ• Ğ˜ Ğ—ĞĞ“Ğ Ğ£Ğ—Ğ˜Ğ¢Ğ¬ ĞĞ GPU
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        std::cout << "ğŸ“Š ĞŸĞ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²ĞºĞ° Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…...\n";

        // Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑĞ¸Ğ½Ñ‚ĞµÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ½Ğ° CPU
        std::vector<std::complex<float>> test_data(total_elements);
        for (size_t i = 0; i < total_elements; ++i) {
            float t = (float)i / params.sample_rate;
            float phase = 2.0f * 3.14159265f * 100.0f * t;  // 100 Hz
            test_data[i] = std::complex<float>(cos(phase), sin(phase));
        }

        std::cout << "  âœ“ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ñ‹ Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ (" << total_elements << " ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²)\n"
                  << "  â€¢ ĞŸĞµÑ€Ğ²Ñ‹Ğ¹ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚: " << test_data[0] << "\n"
                  << "  â€¢ ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğ¹ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚: " << test_data[total_elements-1] << "\n\n";

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // 6. Ğ—ĞĞ“Ğ Ğ£Ğ—Ğ˜Ğ¢Ğ¬ Ğ”ĞĞĞĞ«Ğ• ĞĞ GPU
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        std::cout << "ğŸ“¤ Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ½Ğ° GPU...\n";
        auto time_upload = std::chrono::high_resolution_clock::now();

        signal_vector.SetData(test_data);

        auto time_upload_end = std::chrono::high_resolution_clock::now();
        double upload_time = std::chrono::duration<double, std::milli>(time_upload_end - time_upload).count();

        std::cout << "âœ“ Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶ĞµĞ½Ñ‹ Ğ½Ğ° GPU Ğ·Ğ° " << upload_time << " Ğ¼Ñ\n\n";

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // 7. Ğ¡ĞšĞĞ§ĞĞ¢Ğ¬ Ğ”ĞĞĞĞ«Ğ• Ğ¡ GPU Ğ˜ ĞŸĞ ĞĞ’Ğ•Ğ Ğ˜Ğ¢Ğ¬
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        std::cout << "ğŸ“¥ Ğ¡ĞºĞ°Ñ‡Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ñ GPU...\n";
        auto time_download = std::chrono::high_resolution_clock::now();

        // Ğ¡ĞºĞ°Ñ‡Ğ°Ñ‚ÑŒ Ğ²ÑĞµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
        std::vector<std::complex<float>> result_all = signal_vector.GetData();

        // Ğ¡ĞºĞ°Ñ‡Ğ°Ñ‚ÑŒ Ğ¿ĞµÑ€Ğ²Ñ‹Ğµ 5 ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²
        std::vector<std::complex<float>> result_first = signal_vector.GetDataFirst(5);

        // Ğ¡ĞºĞ°Ñ‡Ğ°Ñ‚ÑŒ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ 5 ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²
        std::vector<std::complex<float>> result_last = signal_vector.GetDataLast(5);

        auto time_download_end = std::chrono::high_resolution_clock::now();
        double download_time = std::chrono::duration<double, std::milli>(time_download_end - time_download).count();

        std::cout << "âœ“ Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ ÑĞºĞ°Ñ‡Ğ°Ğ½Ñ‹ Ñ GPU Ğ·Ğ° " << download_time << " Ğ¼Ñ\n\n";

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // 8. Ğ’Ğ«Ğ’Ğ•Ğ¡Ğ¢Ğ˜ Ğ Ğ•Ğ—Ğ£Ğ›Ğ¬Ğ¢ĞĞ¢Ğ«
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        std::cout << "ğŸ“Š Ğ Ğ•Ğ—Ğ£Ğ›Ğ¬Ğ¢ĞĞ¢Ğ«:\n\n";

        std::cout << "ĞŸĞµÑ€Ğ²Ñ‹Ğµ 5 ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²:\n";
        for (size_t i = 0; i < result_first.size(); ++i) {
            std::cout << "  [" << i << "] = " << result_first[i].real()
                      << " + " << result_first[i].imag() << "j\n";
        }

        std::cout << "\nĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ 5 ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²:\n";
        for (size_t i = 0; i < result_last.size(); ++i) {
            size_t idx = total_elements - result_last.size() + i;
            std::cout << "  [" << idx << "] = " << result_last[i].real()
                      << " + " << result_last[i].imag() << "j\n";
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // 9. ĞŸĞ ĞĞ’Ğ•Ğ ĞšĞ ĞšĞĞ Ğ Ğ•ĞšĞ¢ĞĞĞ¡Ğ¢Ğ˜
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        std::cout << "\nâœ“ ĞŸĞ ĞĞ’Ğ•Ğ ĞšĞ ĞšĞĞ Ğ Ğ•ĞšĞ¢ĞĞĞ¡Ğ¢Ğ˜:\n";

        bool all_match = true;
        for (size_t i = 0; i < result_all.size(); ++i) {
            float diff_real = std::abs(result_all[i].real() - test_data[i].real());
            float diff_imag = std::abs(result_all[i].imag() - test_data[i].imag());

            if (diff_real > 1e-5 || diff_imag > 1e-5) {
                all_match = false;
                if (i < 5) {  // Ğ’Ñ‹Ğ²ĞµÑÑ‚Ğ¸ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¿ĞµÑ€Ğ²Ñ‹Ğµ Ğ½ĞµÑĞ¾Ğ²Ğ¿Ğ°Ğ´ĞµĞ½Ğ¸Ñ
                    std::cout << "  âš ï¸  Ğ­Ğ»ĞµĞ¼ĞµĞ½Ñ‚ [" << i << "] Ğ½Ğµ ÑĞ¾Ğ²Ğ¿Ğ°Ğ´Ğ°ĞµÑ‚!\n";
                }
            }
        }

        if (all_match) {
            std::cout << "  âœ“ Ğ’Ğ¡Ğ• ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ñ‹ ÑĞ¾Ğ²Ğ¿Ğ°Ğ´Ğ°ÑÑ‚ Ñ Ğ¸ÑÑ…Ğ¾Ğ´Ğ½Ñ‹Ğ¼Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸!\n";
        } else {
            std::cout << "  âš ï¸  ĞĞµĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ñ‹ Ğ½Ğµ ÑĞ¾Ğ²Ğ¿Ğ°Ğ´Ğ°ÑÑ‚ (Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ)\n";
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // 10. ĞŸĞĞ›Ğ£Ğ§Ğ˜Ğ¢Ğ¬ GPU ĞĞ”Ğ Ğ•Ğ¡ Ğ”Ğ›Ğ¯ FFT
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        std::cout << "\nğŸ“ Ğ“ĞĞ¢ĞĞ’Ğ Ğ”Ğ›Ğ¯ FFT:\n";
        std::cout << "  â€¢ GPU Ğ±ÑƒÑ„ĞµÑ€ (cl_mem): " << signal_vector.GetMemObject() << "\n"
                  << "  â€¢ Ğ Ğ°Ğ·Ğ¼ĞµÑ€: " << signal_vector.Size() << " ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²\n"
                  << "  â€¢ ĞŸĞ°Ğ¼ÑÑ‚ÑŒ: " << signal_vector.SizeBytes() / (1024*1024) << " MB\n"
                  << "  â€¢ ĞšĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚ OpenCL: " << signal_vector.GetContext() << "\n"
                  << "  â€¢ ĞÑ‡ĞµÑ€ĞµĞ´ÑŒ OpenCL: " << signal_vector.GetQueue() << "\n\n";

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // 11. Ğ˜Ğ¢ĞĞ“ĞĞ’ĞĞ¯ Ğ¡Ğ¢ĞĞ¢Ğ˜Ğ¡Ğ¢Ğ˜ĞšĞ
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        auto time_end = std::chrono::high_resolution_clock::now();
        double total_time = std::chrono::duration<double, std::milli>(time_end - time_start).count();

        std::cout << "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n"
                  << "âœ… Ğ£Ğ¡ĞŸĞ•Ğ¨ĞĞ Ğ—ĞĞ’Ğ•Ğ Ğ¨Ğ•ĞĞ\n"
                  << "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n"
                  << "â±ï¸  Ğ’Ğ Ğ•ĞœĞ¯ Ğ’Ğ«ĞŸĞĞ›ĞĞ•ĞĞ˜Ğ¯:\n"
                  << "  â€¢ GPU Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ: " << init_time << " Ğ¼Ñ\n"
                  << "  â€¢ Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ°: " << gen_time << " Ğ¼Ñ\n"
                  << "  â€¢ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ComplexVector: " << vec_time << " Ğ¼Ñ\n"
                  << "  â€¢ Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ½Ğ° GPU: " << upload_time << " Ğ¼Ñ\n"
                  << "  â€¢ Ğ¡ĞºĞ°Ñ‡Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…: " << download_time << " Ğ¼Ñ\n"
                  << "  â€¢ Ğ˜Ğ¢ĞĞ“Ğ: " << total_time << " Ğ¼Ñ\n";

        std::cout << "\nğŸ“ˆ ĞŸĞ ĞĞŸĞ£Ğ¡ĞšĞĞĞ¯ Ğ¡ĞŸĞĞ¡ĞĞ‘ĞĞĞ¡Ğ¢Ğ¬:\n"
                  << "  â€¢ Upload: "
                  << (total_elements * sizeof(std::complex<float>) / (upload_time / 1000.0) / 1e9)
                  << " Ğ“Ğ±/ÑĞµĞº\n"
                  << "  â€¢ Download: "
                  << (total_elements * sizeof(std::complex<float>) / (download_time / 1000.0) / 1e9)
                  << " Ğ“Ğ±/ÑĞµĞº\n";

        std::cout << "\nğŸ‰ ComplexVector Ğ³Ğ¾Ñ‚Ğ¾Ğ² Ğ´Ğ»Ñ FFT!\n";

    } catch (const std::exception& e) {
        std::cerr << "âŒ ĞĞ¨Ğ˜Ğ‘ĞšĞ: " << e.what() << std::endl;
        return 1;
    }

    return 0;
}

/*
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * ĞšĞĞœĞŸĞ˜Ğ›Ğ¯Ğ¦Ğ˜Ğ¯:
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * 
 * g++ -O3 -std=c++17 \
 *     -I/opt/rocm/include \
 *     -I./include \
 *     -o example_complex_vector \
 *     example_complex_vector.cpp \
 *     src/generator/generator_gpu.cpp \
 *     src/gpu/complex_vector.cpp \
 *     -L/opt/rocm/lib \
 *     -lOpenCL -lm
 * 
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 */
